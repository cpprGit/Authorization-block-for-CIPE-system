# ccpr

[Процессы](#processes)  
[Бэклог](#backlog)  
[Разработка и сборка проекта](#dev)
[Тестирование](#testing)  
[Ревью](#review)  
[Мердж](#merge)  
[Релиз](#release)  
[Аккаунты](#accs)  
[FAQ](#faq)

<a name="processes"><h2>Процессы</h2></a>

В команде разработки системы существуют следующие встречки: синки и планирования. Они назначаются с определенной периодичностью при необходимости.

Все задачи проекта находятся на [доске](https://trello.com/b/a6xYunj8/%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0-%D1%86%D0%BF%D0%BF%D1%80).
Передвижение задач по статусам обязательно для наиболее плодотворной работы команды.
Далее будет представлен алгоритм перемещения.

У каждой задачи есть тег, который показывает к какой части проекта задача относится и явдяется ли она багом.
Существующие теги: `frontend`, `backend`, `database`, `process`, `testing`, `bug`.

Разработка ведется по git-flow.
Имеется стабильная релизная версия в ветке `master` и версия проекта со всеми последними фичами - `develop`.
Также существуют ветки релизов `rc-*номер релиза*` и фичей `*проект*-*номер таска*-*краткое описание фичи*`.

<a name="backlog"><h3>Бэклог</h3></a>

Задачи в данном статусе отсортированы по приоритету. => Просто бьерем их сверху по очереди.
Если задача имеет одновременно теги `frontend` и `backend` => ее еще необходимо распилить на части. (т е брать ее в разработку нельзя)

Для того чтобы взять на себя задачу достаточно проставить в ней себя как участника.

<a name="dev"><h3>Разработка</h3></a>

Перед началом работы над задачей необходимо из ветки `develop` отвести себе ветку для фичи.

Правило нейминга веток: `*проект(тег в трелло)*-*номер таска*-*краткое описание фичи*`.

Примеры:

```
frontend-28-add-some-button
backend-33-add-some-enpoint
process-33-add-docs
```

#### Сборка проекта:

Из папки docker поднимаем базу:

```
docker-machine start default
eval $(docker-machine env default)
docker-compose up --build
```

Удаляем, если она существовала, папку build в директории docker и раним еще пару скриптов:

```
gradle generateDevJooqSchemaSource
gradle build
```

Запускаем бэкенд, через конфигурацию в IDE:
![Скрин конфигурации билда](https://sun9-60.userapi.com/KVZNuGpP1xsYiQxY90q8MCXgyItjuTmBx5e9_w/0Lh9D6LKxhk.jpg)

Запускаем фронтенд:

```
npm install
npm run start
```

#### Разборка проекта:

Процесс с базой стопаем через Ctrl+C и тут же запускаем:

```
docker-compose down
```

Бекенд стопаем через интерфейс IDE.

Фронтенд стопаем через Ctrl+C.

<a name="testig"><h3>Тестирование</h3></a>

Далее необходимо создать МерджРеквест вашей ветки с фичой в ветку `develop`.
МР необходимо назвать по следующим правилам: `*ПРОЕКТ*-*номер таска*: *краткое описание фичи*`.

Примеры:

```
FRONTEND-28: Добавлена кнопка редактирования формы
BACKEND-33: Добавлена ручка запроса списков всех менторов
```

Как только разработка фичи завершена необходимо самостоятельно провести тестирование:

- Перевести задачу в статус Тестирование
- Продумать кейсы тестирования разрабатываемой фичи и прогнать их все;
- Взять все кейсы из папки ccpr/test-cases и пройти их вручную, если они как-то касаются разрабатываемой фичи;
- Написать тесты:
  - В папке ccpr/test-cases найти или создать папку, соответствую месту добавления фичи (к примеру `profile`, `search`, `forms`), создать там файл название-фичи.md и оформить в нем тест-кейс для фичи (не выполнять если для данного кейса написан автотест);
  - <del>Юниты на обособленные функции, которые возникли в вашем коде</del> (временно недоступно);
  - <del>Интеграционные на полноценные сценарии пользовательского использования со всеми альтернативными потоками</del> (временно недоступно);
- <del>Прогнать все существующие автотесты, заскринить их успешное выполнение и приложить к МерджРеквесту</del> (временно недоступно).

<a name="review"><h3>Ревью</h3></a>

После успешного прохождения этапа тестирования необходимо перевести задачу в статус На ревью.

Ревью проводится кураторами Настей и Максимом.

Как только апрув получен (куратор передвинет таск в статус Готово к мерджу) - можно переходить к следующему этапу:)

<a name="merge"><h3>Мердж</h3></a>

Далее МР надо замерджить, обязательно прроставив галочку Squash (Чтобы в итоге 1 коммит соответсвовал 1 задаче и было сразу понятно какой):
![](https://sun9-51.userapi.com/M43uv4xytRzpN_bkD86GhdRSfLz3miawNjzh1g/oHHutLRmzWg.jpg)

<del>После мерджа в ветке 'develop' надо прогнать все существующие автотесты, заскринить их успешное выполнение и приложить к комментарию в таске</del> (временно недоступно).

<a name="release"><h3>Релиз</h3></a>

Плановые релизы катаются 1 раз в этап (это 2-3 месяца, точные сроки этапов можно уточнить у Насти и Максима).

Раскатка релиза должна начинаться за 1 неделю до конца этапа.
При этом все задачи данного этапа должны уже находиться в ветке develop.

Релиз дело общественное и проходит с участием всей рабочей группы:

1. По согласию всех участников группы из ветки девелоп Максим создает ветку `rc-*номер релиза*`
2. Максим создает таск в трелло на релиз. Его название должно примерно соответствовать схеме: `РЕЛИЗ-*номер-релиза*: плановая(внеплановая) выкатка по случаю конца этапа 2 (необходимости протестировать авторизацию на проде)`
3. Максим в релизной ветке прогоняет автотесты и их пруфпик прикрепляет к релизному таску.
4. Силами всей группы проводится полное ручное тестирование релизной ветки (синхронизация и распределение тест-кейсов в чате)
5. Найденные баги прописываются в релизном таске и фиксятся виновными в них разрабами. Фиксы вливаются в релизную ветку и черипикаюжтся в девелоп. С фиксом в мастер должен обязательно ехать тест-кейс на данный баг. Перед добавлением фикса надо прогнать все автотесты, пруфпик в релизный таск.
6. После того как все разрабы отрепортили, что тестирование завершено - Максим приступает к шагу 3.
7. Максим выкатывает релиз в прод, вливает релиз в `master` и закрывает релизный таск.

Внеплановые релизы катаются по согласованию.

<a name="accs"><h2>Аккаунты</h2></a>
Руководитель (дев режим):

почта: `supervisor@edu.hse.ru`

пароль: `Qwerty12345`
<a name="faq"><h2>FAQ</h2></a>

#### Где узнать номер таски в трелло?

Заходим в трелло -> тыкаем в таску -> первая цифра в URL это и есть номер задачи.

#### Как искать таск в трелло по его номеру?

Заходим в трелло -> жмякаем на слово Меню в правом верхнем углу -> нажимаем Поиск карточек -> вводим номер.

#### Что делать если хочется сделать что-то выходящее за скоуп текущего этапа?

Доделать этап быстрее и начать заниматься тем что хочется.

#### Что делать если задачу из этапа можно сделать круто и долго, а можно фигово и быстро?

Выбрать второй вариант, а когда задачи из этапа кончатся - пилить крутое решение.

Не касается ситуаций когда 2 решения различаются работой менее чем на 2 дня.
